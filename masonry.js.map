{"version":3,"file":"masonry.js","sources":["masonry.js"],"sourcesContent":["const container = document.querySelector(\".masonry\");\nconst children = [...container.children];\nconst verticalGap = 15;\n\nfunction shouldSkipMasonry() {\n\treturn window.innerWidth <= 900 && !window.matchMedia(\"print\").matches && !window._printing;\n}\n\nfunction clearMasonry() {\n    // Remove masonry styling\n    container.classList.remove(\"masonry\");\n\n    // Reset container max-height\n    container.style.height = `unset`;\n\n    // Reset children to default\n    for (let i = 0; i < children.length; i++) children[i].style.transform = \"none\";\n}\n\nfunction calculateElementBounds(element) {\n    const bounds = element.getBoundingClientRect();\n    const height = Math.max(\n        bounds.height,\n        element.offsetHeight,\n        element.clientHeight,\n        element.scrollHeight\n    );\n    const width = Math.max(\n        bounds.width,\n        element.offsetWidth,\n        element.clientWidth,\n        element.scrollWidth\n    );\n\n    return { height, width };\n}\n\nfunction setChildrenMinimumWidth(value) {\n    for (let i = 0; i < children.length; i++) children[i].style.minWidth = value;\n}\n\nfunction masonry() {\n    const containerWidth = container.offsetWidth;\n    let columns = 2;\n\n    // If the screen size is too smals\n    if (shouldSkipMasonry()) {\n        // Make each item take up the full width of the container and be a full row\n        columns = 1;\n        setChildrenMinimumWidth(\"100%\");\n    } else {\n        // Otherwise, spread the items out evenly\n        setChildrenMinimumWidth(\"unset\");\n    }\n\n    // Ensure masonry styling\n    container.classList.add(\"masonry\");\n\n    // Define sizing\n    const rowOffsets = new Array(columns).fill(verticalGap);\n    let columnOffset = 0;\n\n    // Iterates trough children and applies masonry\n    for (let i = 0; i < children.length; i++) {\n        const column = i % columns;\n        const child = children[i];\n        const bounds = calculateElementBounds(child);\n\n        // Apply to the element\n        child.style.transform = `translate(${Math.ceil(columnOffset)}px, ${Math.ceil(rowOffsets[column])}px)`;\n\t\tchild.style.opacity = 1;\n\n        // Append the offsets for the next child\n\t\trowOffsets[column] += bounds.height + verticalGap;\n\t\tcolumnOffset += containerWidth - bounds.width;\n\n        // Last column, reset column offset and start new row\n\t\tif (column >= columns - 1) columnOffset = 0;\n    }\n\n    // Set the container height\n    let containerHeight = Math.max(...rowOffsets) ;\n    container.style.height = `${containerHeight}px`;\n}\n\nwindow.addEventListener(\"load\", function () {\n\tsetTimeout(() => {\n\t\tmasonry();\n\t}, 0);\n});\n\nwindow.addEventListener(\"resize\", function () {\n\tsetTimeout(() => {\n\t\tmasonry();\n\t}, 10);\n});\n"],"names":["container","document","querySelector","children","verticalGap","shouldSkipMasonry","window","innerWidth","matchMedia","matches","_printing","clearMasonry","classList","remove","style","height","let","i","length","transform","calculateElementBounds","element","bounds","getBoundingClientRect","Math","max","offsetHeight","clientHeight","scrollHeight","width","offsetWidth","clientWidth","scrollWidth","setChildrenMinimumWidth","value","minWidth","masonry","containerWidth","columns","add","rowOffsets","Array","fill","columnOffset","column","child","ceil","opacity","containerHeight","addEventListener","setTimeout"],"mappings":"AAAA,MAAMA,UAAYC,SAASC,cAAc,YACnCC,SAAW,IAAIH,UAAUG,UACzBC,YAAc,GAEpB,SAASC,oBACR,OAAOC,OAAOC,YAAc,MAAQD,OAAOE,WAAW,SAASC,UAAYH,OAAOI,UAGnF,SAASC,eAELX,UAAUY,UAAUC,OAAO,WAG3Bb,UAAUc,MAAMC,OAAS,QAGzB,IAAKC,IAAIC,EAAI,EAAGA,EAAId,SAASe,OAAQD,IAAKd,SAASc,GAAGH,MAAMK,UAAY,OAG5E,SAASC,uBAAuBC,GAC5B,IAAMC,EAASD,EAAQE,wBAcvB,MAAO,CAAER,OAbMS,KAAKC,IAChBH,EAAOP,OACPM,EAAQK,aACRL,EAAQM,aACRN,EAAQO,cASKC,MAPHL,KAAKC,IACfH,EAAOO,MACPR,EAAQS,YACRT,EAAQU,YACRV,EAAQW,cAMhB,SAASC,wBAAwBC,GAC7B,IAAKlB,IAAIC,EAAI,EAAGA,EAAId,SAASe,OAAQD,IAAKd,SAASc,GAAGH,MAAMqB,SAAWD,EAG3E,SAASE,UACL,IAAMC,EAAiBrC,UAAU8B,YACjCd,IAAIsB,EAAU,EAGVjC,qBAEAiC,EAAU,EACVL,wBAAwB,SAGxBA,wBAAwB,SAI5BjC,UAAUY,UAAU2B,IAAI,WAGxB,MAAMC,EAAa,IAAIC,MAAMH,GAASI,KAAKtC,aAC3CY,IAAI2B,EAAe,EAGnB,IAAK3B,IAAIC,EAAI,EAAGA,EAAId,SAASe,OAAQD,IAAK,CACtC,IAAM2B,EAAS3B,EAAIqB,EACnB,MAAMO,EAAQ1C,SAASc,GACvB,IAAMK,EAASF,uBAAuByB,GAGtCA,EAAM/B,MAAMK,uBAAyBK,KAAKsB,KAAKH,SAAoBnB,KAAKsB,KAAKN,EAAWI,SAC9FC,EAAM/B,MAAMiC,QAAU,EAGtBP,EAAWI,IAAWtB,EAAOP,OAASX,YACtCuC,GAAgBN,EAAiBf,EAAOO,MAGpCe,GAAUN,EAAU,IAAGK,EAAe,GAIxC3B,IAAIgC,EAAkBxB,KAAKC,OAAOe,GAClCxC,UAAUc,MAAMC,OAAYiC,EAAH,KAG7B1C,OAAO2C,iBAAiB,OAAQ,WAC/BC,WAAW,KACVd,WACE,KAGJ9B,OAAO2C,iBAAiB,SAAU,WACjCC,WAAW,KACVd,WACE"}